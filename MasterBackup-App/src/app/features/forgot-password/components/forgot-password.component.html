<!--begin::Main-->
<div class="d-flex flex-column flex-root">
    <!--begin::Authentication - Password reset -->
    <div class="d-flex flex-column flex-column-fluid bgi-position-y-bottom position-x-center bgi-no-repeat bgi-size-contain bgi-attachment-fixed" style="background-image: url(assets/media/illustrations/sketchy-1/14.png); height: 100vh;">
        <!--begin::Content-->
        <div class="d-flex flex-center flex-column flex-column-fluid p-10 pb-lg-20">
            <!--begin::Logo-->
            <a href="../../demo1/dist/index.html" class="mb-12">
                <img alt="Logo" src="assets/media/logos/logo-1.svg" class="h-40px" />
            </a>
            <!--end::Logo-->
            <!--begin::Wrapper-->
            <div class="w-lg-500px bg-body rounded shadow-sm p-10 p-lg-15 mx-auto">
                
                <!--begin::Success Card-->
                <div *ngIf="emailSent" class="card border-0">
                    <div class="card-body text-center p-10">
                        <!--begin::Icon-->
                        <div class="mb-9">
                            <i class="fa fa-check-circle fs-5tx text-success">
                                <span class="path1"></span>
                                <span class="path2"></span>
                            </i>
                        </div>
                        <!--end::Icon-->
                        
                        <!--begin::Title-->
                        <h1 class="fw-bolder text-gray-900 mb-5">¡Correo Enviado!</h1>
                        <!--end::Title-->
                        
                        <!--begin::Message-->
                        <div class="fw-semibold fs-6 text-gray-500 mb-7">
                            Se ha enviado un enlace para restablecer tu contraseña a:
                        </div>
                        <div class="fw-bold fs-4 text-gray-900 mb-10">
                            {{ sentToEmail }}
                        </div>
                        <!--end::Message-->
                        
                        <!--begin::Instructions-->
                        <div class="text-start mb-10">
                            <div class="text-gray-600 fw-semibold fs-6 mb-5">Por favor sigue estos pasos:</div>
                            <div class="d-flex align-items-start mb-4">
                                <span class="badge badge-circle badge-light-primary me-3 fs-6">1</span>
                                <span class="text-gray-700 fw-semibold">Revisa tu bandeja de entrada</span>
                            </div>
                            <div class="d-flex align-items-start mb-4">
                                <span class="badge badge-circle badge-light-primary me-3 fs-6">2</span>
                                <span class="text-gray-700 fw-semibold">Haz clic en el enlace para restablecer tu contraseña</span>
                            </div>
                            <div class="d-flex align-items-start mb-4">
                                <span class="badge badge-circle badge-light-primary me-3 fs-6">3</span>
                                <span class="text-gray-700 fw-semibold">Crea una nueva contraseña segura</span>
                            </div>
                        </div>
                        <!--end::Instructions-->
                        
                        <!--begin::Notice-->
                        <div class="notice d-flex bg-light-warning rounded border-warning border border-dashed p-6 mb-10">
                            <i class="ki-duotone ki-information-5 fs-2tx text-warning me-4">
                                <span class="path1"></span>
                                <span class="path2"></span>
                                <span class="path3"></span>
                            </i>
                            <div class="d-flex flex-stack flex-grow-1">
                                <div class="fw-semibold">
                                    <div class="fs-6 text-gray-700">
                                        Si no recibes el correo en unos minutos, revisa tu carpeta de spam o correo no deseado.
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--end::Notice-->
                        
                        <!--begin::Action-->
                        <button 
                            type="button"
                            (click)="goToLogin()"
                            class="btn btn-lg btn-primary fw-bolder">
                            Volver al inicio de sesión
                        </button>
                        <!--end::Action-->
                    </div>
                </div>
                <!--end::Success Card-->

                <!--begin::Form-->
                <form *ngIf="!emailSent" [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="form w-100">
                    <!--begin::Heading-->
                    <div class="text-center mb-10">
                        <!--begin::Title-->
                        <h1 class="text-dark mb-3">¿Olvidaste tu contraseña?</h1>
                        <!--end::Title-->
                        <!--begin::Link-->
                        <div class="text-gray-400 fw-bold fs-5">Ingresa tu correo electrónico para restablecerla.</div>
                        <!--end::Link-->
                    </div>
                    <!--end::Heading-->

                    <!--begin::Error Message-->
                    <div *ngIf="errorMessage" class="alert alert-danger d-flex align-items-center mb-10">
                        <i class="fa fa-times-circle fs-2hx text-danger me-4">
                            <span class="path1"></span>
                            <span class="path2"></span>
                            <span class="path3"></span>
                        </i>
                        <div class="d-flex flex-column">
                            <span class="fw-semibold">{{ errorMessage }}</span>
                        </div>
                    </div>
                    <!--end::Error Message-->

                    <!--begin::Input group-->
                    <div class="fv-row mb-10">
                        <label class="form-label fw-bolder text-gray-900 fs-6">Correo electrónico</label>
                        <input 
                            class="form-control form-control-solid" 
                            type="email" 
                            formControlName="email"
                            autocomplete="email" 
                            [class.is-invalid]="forgotPasswordForm.get('email')?.invalid && forgotPasswordForm.get('email')?.touched" />
                        <div *ngIf="forgotPasswordForm.get('email')?.invalid && forgotPasswordForm.get('email')?.touched" class="invalid-feedback">
                            <span *ngIf="forgotPasswordForm.get('email')?.errors?.['required']">El correo electrónico es requerido</span>
                            <span *ngIf="forgotPasswordForm.get('email')?.errors?.['email']">Debe ser un correo electrónico válido</span>
                        </div>
                    </div>
                    <!--end::Input group-->

                    <!--begin::Actions-->
                    <div class="d-flex flex-wrap justify-content-center pb-lg-0">
                        <button 
                            type="submit" 
                            class="btn btn-lg btn-primary fw-bolder me-4"
                            [disabled]="isSubmitting || forgotPasswordForm.invalid">
                            <span *ngIf="!isSubmitting">Enviar</span>
                            <span *ngIf="isSubmitting">
                                Por favor espere...
                                <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                            </span>
                        </button>
                        <button 
                            type="button"
                            (click)="goToLogin()"
                            class="btn btn-lg btn-light-primary fw-bolder">
                            Cancelar
                        </button>
                    </div>
                    <!--end::Actions-->
                </form>
                <!--end::Form-->
            </div>
            <!--end::Wrapper-->
        </div>
        <!--end::Content-->
    </div>
    <!--end::Authentication - Password reset-->
</div>
<!--end::Main-->
